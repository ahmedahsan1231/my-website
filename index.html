<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>بطاقة الترحيب من حمودي</title>
  <style>
    /* ---------- Reset & base ---------- */
    :root{
      --bg1: #031027;
      --bg2: #062a57;
      --accent: #4fd1ff;
      --soft: rgba(255,255,255,0.06);
      --glass: rgba(255,255,255,0.06);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: "Segoe UI", Tahoma, "Noto Naskh Arabic", "Arial", sans-serif;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(46,104,164,0.15), transparent),
                  radial-gradient(900px 500px at 90% 80%, rgba(10,40,80,0.18), transparent),
                  linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 60%);
      color: #eaf6ff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      overflow:hidden;
    }

    /* ---------- Card ---------- */
    .card{
      width:min(980px, 94%);
      max-width:980px;
      min-height:420px;
      border-radius:22px;
      position:relative;
      overflow:hidden;
      box-shadow: 0 20px 50px rgba(2,8,22,0.6);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      backdrop-filter: blur(6px) saturate(1.05);
      border: 1px solid rgba(255,255,255,0.04);
      padding:28px;
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:20px;
      align-items:center;
    }

    /* ---------- Left content (text) ---------- */
    .content{
      padding:20px 28px;
      display:flex;
      flex-direction:column;
      gap:18px;
      z-index:3;
    }
    .label{
      font-size:14px;
      color: #cdeeff;
      opacity:0.9;
      letter-spacing:1px;
      text-transform:uppercase;
    }
    h1{
      font-size:34px;
      line-height:1.05;
      margin-top:6px;
      text-shadow:
        0 2px 12px rgba(79,209,255,0.09),
        0 6px 30px rgba(5,30,60,0.25);
    }

    .message{
      font-size:20px;
      line-height:1.5;
      max-width:80%;
      background: linear-gradient(90deg, rgba(255,255,255,0.92), rgba(230,250,255,0.9));
      color:#012130;
      padding:14px 18px;
      border-radius:12px;
      box-shadow: 0 6px 20px rgba(1,22,35,0.25);
      transform-origin:right center;
      animation: floatText 6s ease-in-out infinite;
      direction:rtl;
    }
    @keyframes floatText{
      0%{transform:translateY(0) rotateZ(0deg)}
      50%{transform:translateY(-8px) rotateZ(-0.6deg)}
      100%{transform:translateY(0) rotateZ(0deg)}
    }

    .from{
      margin-top:6px;
      font-size:14px;
      opacity:0.9;
      color: #cfeeff;
    }

    /* ---------- Right panel (visual) ---------- */
    .visual {
      position:relative;
      height:320px;
      border-radius:14px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      padding:18px;
      z-index:2;
    }

    .glass {
      position:absolute;
      inset:12px;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
      border:1px solid rgba(255,255,255,0.03);
      pointer-events:none;
      z-index:4;
      backdrop-filter: blur(8px);
    }

    /* small info and controls */
    .controls{
      position:absolute;
      left:18px;
      bottom:16px;
      display:flex;
      gap:8px;
      z-index:6;
    }
    .btn{
      background: linear-gradient(180deg, rgba(255,255,255,0.035), rgba(255,255,255,0.015));
      border: 1px solid rgba(255,255,255,0.06);
      padding:8px 12px;
      border-radius:10px;
      font-size:13px;
      cursor:pointer;
      color:#e7faff;
      box-shadow: 0 6px 18px rgba(3,12,30,0.35);
    }
    .btn:active{transform:translateY(1px) scale(0.997)}

    /* small legend */
    .legend{
      position:absolute;
      right:18px;
      bottom:16px;
      z-index:6;
      font-size:12px;
      color: rgba(230,255,255,0.9);
      opacity:0.95;
      text-align:right;
    }

    /* ---------- star glow around title ---------- */
    .title-wrap{
      display:inline-block;
      padding:12px 18px;
      border-radius:20px;
      background: linear-gradient(90deg, rgba(79,209,255,0.06), rgba(30,80,140,0.06));
      box-shadow: 0 10px 30px rgba(10,40,90,0.3), 0 0 40px rgba(79,209,255,0.05) inset;
      z-index:3;
    }

    /* ---------- canvas & responsive ---------- */
    canvas#stars {
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      display:block;
      z-index:1;
    }
    .nebula {
      position:absolute;
      inset: -20% -10% -10% -10%;
      z-index:0;
      filter: blur(40px) saturate(120%);
      opacity:0.9;
      pointer-events:none;
      mix-blend-mode: screen;
    }

    @media (max-width:880px){
      .card{grid-template-columns: 1fr; padding:18px; gap:12px}
      .visual{height:260px}
      .message{max-width:100%}
    }
  </style>
</head>
<body>
  <div class="card" role="region" aria-label="بطاقة ترحيب من حمودي">
    <div class="content">
      <div class="label">بطاقة ترحيب</div>
      <div class="title-wrap">
        <h1>من حمودي</h1>
      </div>

      <!-- الرسالة المطلوبة -->
      <div class="message" id="message">مرحبا، معاكم افضل سيرفر حمودي على إطلاق، ويععع!.</div>

      <div class="from">— تحيات حمودي</div>

      <div style="display:flex;gap:10px;margin-top:6px;flex-wrap:wrap">
        <button class="btn" id="toggleStars" aria-pressed="false">إيقاف/تشغيل الفضاء</button>
        <button class="btn" id="pulse" title="نبضة قصيرة">نبضة</button>
        <button class="btn" id="downloadImg" title="حفظ البطاقة كصورة">حفظ كصورة</button>
      </div>
    </div>

    <div class="visual" aria-hidden="false">
      <canvas id="stars" width="800" height="600"></canvas>
      <!-- Nebula SVG: layered soft shapes -->
      <svg class="nebula" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
        <defs>
          <radialGradient id="g1" cx="30%" cy="30%">
            <stop offset="0%" stop-color="#3fb7ff" stop-opacity="0.24"/>
            <stop offset="100%" stop-color="#03254a" stop-opacity="0"/>
          </radialGradient>
          <radialGradient id="g2" cx="70%" cy="70%">
            <stop offset="0%" stop-color="#2a7fff" stop-opacity="0.20"/>
            <stop offset="100%" stop-color="#02102a" stop-opacity="0"/>
          </radialGradient>
        </defs>
        <rect width="100%" height="100%" fill="url(#g1)"/>
        <ellipse cx="75%" cy="25%" rx="280" ry="160" fill="#0fb8ff" opacity="0.06"/>
        <ellipse cx="20%" cy="70%" rx="380" ry="200" fill="#1b5fd1" opacity="0.05"/>
        <ellipse cx="50%" cy="45%" rx="360" ry="260" fill="url(#g2)" opacity="0.06" />
      </svg>

      <div class="glass" aria-hidden="true"></div>

      <div class="controls" aria-hidden="true">
        <button class="btn" id="slow">تباطؤ</button>
        <button class="btn" id="normal">سرعة عادية</button>
        <button class="btn" id="fast">سريع</button>
      </div>

      <div class="legend">جالاكسي هادئة • تفاعل بسيط</div>
    </div>
  </div>

  <script>
    /* ---------- Stars canvas: gentle animated particles / parallax ---------- */
    const canvas = document.getElementById('stars');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = canvas.clientWidth;
    let h = canvas.height = canvas.clientHeight;
    let stars = [];
    let running = true;
    let speedMultiplier = 1;

    function resize(){
      w = canvas.width = canvas.clientWidth;
      h = canvas.height = canvas.clientHeight;
      initStars();
    }
    window.addEventListener('resize', resize);

    function rand(min,max){ return Math.random()*(max-min)+min }

    function initStars(){
      stars = [];
      const count = Math.round((w*h)/12000) + 60; // scale with area
      for(let i=0;i<count;i++){
        stars.push({
          x: rand(0,w),
          y: rand(0,h),
          z: rand(0.3,1),
          size: rand(0.4,1.8),
          twinkle: Math.random()*Math.PI*2,
          hue: rand(200,215)
        });
      }
    }

    function draw(){
      if(!running) return;
      ctx.clearRect(0,0,w,h);

      // subtle background glow gradient
      const g = ctx.createLinearGradient(0,0,w,h);
      g.addColorStop(0, 'rgba(6,40,80,0.18)');
      g.addColorStop(1, 'rgba(0,10,25,0.16)');
      ctx.fillStyle = g;
      ctx.fillRect(0,0,w,h);

      // draw stars
      for(let s of stars){
        s.y -= 0.3 * s.z * speedMultiplier;
        s.x += Math.sin(s.y*0.001 + s.z*8)*0.1;
        s.twinkle += 0.05;
        if(s.y < -10) s.y = h + 10;

        const alpha = 0.5 + 0.5*Math.sin(s.twinkle);
        ctx.beginPath();
        const size = s.size * (0.8 + 0.6*s.z);
        ctx.fillStyle = `hsla(${s.hue},90%,75%,${alpha})`;
        ctx.arc(s.x, s.y, size, 0, Math.PI*2);
        ctx.fill();

        // glow
        if(size>1.1){
          const rad = ctx.createRadialGradient(s.x,s.y,size*0.6,s.x,s.y,size*5);
          rad.addColorStop(0, `rgba(79,209,255,${alpha*0.08})`);
          rad.addColorStop(1, 'rgba(0,0,0,0)');
          ctx.fillStyle = rad;
          ctx.fillRect(s.x-size*5, s.y-size*5, size*10, size*10);
        }
      }

      requestAnimationFrame(draw);
    }

    // start
    initStars();
    requestAnimationFrame(draw);

    // Controls
    document.getElementById('toggleStars').addEventListener('click', () => {
      running = !running;
      const btn = document.getElementById('toggleStars');
      btn.setAttribute('aria-pressed', String(!running));
      if(running) { requestAnimationFrame(draw); btn.textContent = 'إيقاف/تشغيل الفضاء' }
      else { btn.textContent = 'إيقاف/تشغيل الفضاء' }
    });

    document.getElementById('slow').addEventListener('click', ()=>{ speedMultiplier = 0.35 });
    document.getElementById('normal').addEventListener('click', ()=>{ speedMultiplier = 1 });
    document.getElementById('fast').addEventListener('click', ()=>{ speedMultiplier = 2.0 });

    // Pulse effect: quick scale + glow on message
    document.getElementById('pulse').addEventListener('click', ()=>{
      const el = document.getElementById('message');
      el.animate([
        { transform: 'translateY(0) scale(1)', boxShadow: '0 6px 20px rgba(1,22,35,0.25)'},
        { transform: 'translateY(-8px) scale(1.03)', boxShadow: '0 20px 50px rgba(79,209,255,0.18)'},
        { transform: 'translateY(0) scale(1)', boxShadow: '0 6px 20px rgba(1,22,35,0.25)'}
      ], { duration: 650, easing: 'cubic-bezier(.2,.8,.2,1)' });
    });

    // Download canvas as image (combines nebula + canvas + card look)
    document.getElementById('downloadImg').addEventListener('click', async()=>{
      // create a temporary canvas and draw the card area
      const scale = 2;
      const cardEl = document.querySelector('.card');
      const rect = cardEl.getBoundingClientRect();
      const tmp = document.createElement('canvas');
      tmp.width = Math.round(rect.width * scale);
      tmp.height = Math.round(rect.height * scale);
      const tctx = tmp.getContext('2d');

      // draw background gradient similar to page
      const g = tctx.createLinearGradient(0,0,tmp.width,tmp.height);
      g.addColorStop(0, '#031027');
      g.addColorStop(1, '#062a57');
      tctx.fillStyle = g;
      tctx.fillRect(0,0,tmp.width,tmp.height);

      // draw stars canvas scaled
      const off = document.createElement('canvas');
      off.width = w; off.height = h;
      const offCtx = off.getContext('2d');
      offCtx.drawImage(canvas, 0, 0); // current stars frame
      tctx.drawImage(off, 0, 0, tmp.width, tmp.height);

      // overlay text by drawing DOM elements: simple approach (draw background boxes and text)
      // title
      tctx.fillStyle = 'rgba(255,255,255,0.96)';
      tctx.font = `${36*scale}px sans-serif`;
      tctx.textAlign = 'right';
      tctx.fillText('من حمودي', tmp.width - 40*scale, 90*scale);

      // message box
      const msg = document.getElementById('message').textContent;
      const boxW = tmp.width * 0.48;
      const boxX = tmp.width - boxW - 40*scale;
      const boxY = 120*scale;
      tctx.fillStyle = 'rgba(230,250,255,0.95)';
      const rr = 18*scale;
      roundRect(tctx, boxX, boxY, boxW, 120*scale, rr, true, false);
      tctx.fillStyle = '#012130';
      tctx.font = `${18*scale}px sans-serif`;
      tctx.textAlign = 'right';
      wrapTextRTL(tctx, msg, boxX + boxW - 18*scale, boxY + 32*scale, boxW - 36*scale, 28*scale);

      // save
      const link = document.createElement('a');
      link.download = 'hamoodi-card.png';
      link.href = tmp.toDataURL('image/png');
      link.click();

      // helpers
      function roundRect(ctx, x, y, w, h, r, fill, stroke){
        ctx.beginPath();
        ctx.moveTo(x + r, y);
        ctx.arcTo(x + w, y, x + w, y + h, r);
        ctx.arcTo(x + w, y + h, x, y + h, r);
        ctx.arcTo(x, y + h, x, y, r);
        ctx.arcTo(x, y, x + w, y, r);
        ctx.closePath();
        if(fill) ctx.fill();
        if(stroke) ctx.stroke();
      }
      function wrapTextRTL(ctx, text, x, y, maxWidth, lineHeight){
        // simple rtl wrapping by splitting words and assembling lines
        const words = text.split(' ');
        let line = '';
        for(let n = 0; n < words.length; n++) {
          const testLine = (line.length ? words[n] + ' ' + line : words[n]);
          const metrics = ctx.measureText(testLine);
          if (metrics.width > maxWidth && n > 0) {
            ctx.fillText(line, x, y);
            line = words[n];
            y += lineHeight;
          } else {
            line = testLine;
          }
        }
        ctx.fillText(line, x, y);
      }
    });

    // small accessibility: let keyboard toggle
    document.addEventListener('keydown', (e)=>{
      if(e.key === ' '){ // space toggles animation
        e.preventDefault();
        running = !running;
        if(running) requestAnimationFrame(draw);
      }
    });

    // initial resize to match container
    resize();
  </script>
</body>
</html>
